<div *ngIf="order && tickets; else loading">
  <h2>Order #{{ order.id }}</h2>

  <section class="order-meta">
    <p><strong>Date:</strong> {{ order.showDate | date: 'short' }}</p>
    <p><strong>Show:</strong> {{ order.showName }}</p>
    <p><strong>Location:</strong> {{ order.locationName }}</p>
    <p><strong>Total Price:</strong> {{ order.totalPrice | currency }}</p>
  </section>

  <section class="ticket-table">
    <table>
      <thead>
      <tr>
        <th>#</th>
        <th>Seat</th>
        <th>Status</th>
        <th>Price</th>
        <th>PDF</th>
        <th>Select</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let ticket of tickets; let i = index">
        <td>{{ i + 1 }}</td>
        <td>
          <ng-container *ngIf="ticket.rowNumber && ticket.seatLabel; else standing">
            {{ ticket.rowNumber }}{{ ticket.seatLabel }}
          </ng-container>
          <ng-template #standing>Standing</ng-template>
        </td>
        <td>{{ ticket.status }}</td>
        <td>{{ ticket.price | currency }}</td>
        <td>
          <button (click)="downloadPdf(ticket.id)" disabled>PDF</button>
        </td>
        <td>
          <input type="checkbox" [(ngModel)]="selected[ticket.id]" disabled />
        </td>
      </tr>
      </tbody>
    </table>
  </section>

  <div class="actions">
    <button (click)="refundSelected()" class="refund-button" disabled>
      Refund Selected
    </button>
  </div>
</div>

<ng-template #loading>
  <p>Loading order details...</p>
</ng-template>
