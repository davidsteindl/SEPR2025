<div class="mt-4 container">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Create Artist</h2>
    <button class="btn btn-outline-secondary" (click)="onBackClick()">
      ‚Üê Back to Admin Page
    </button>
  </div>
  <hr>

  <form #artistForm="ngForm" class="tab-box" (ngSubmit)="createArtist()" novalidate>
    <div class="form-group">
      <label for="firstName">First Name</label>
      <input
        id="firstName"
        type="text"
        name="firstName"
        class="form-control"
        [(ngModel)]="artist.firstname"
        #firstName="ngModel"
        [required]="!artist.stagename"
      />

      <div *ngIf="!artist.stagename && firstName.invalid && firstName.touched" class="text-warning">
        First Name is required when there is no Stage Name.
      </div>
    </div>

    <div class="form-group mt-3">
      <label for="lastName">Last Name</label>
      <input
        id="lastName"
        type="text"
        name="lastName"
        class="form-control"
        [(ngModel)]="artist.lastname"
        #lastName="ngModel"
        [required]="!artist.stagename"
      />
      <div *ngIf="!artist.stagename && lastName.invalid && lastName.touched" class="text-warning">
        Last Name is required when there is no Stage Name.
      </div>
    </div>

    <div class="form-group mt-3">
      <label for="stageName">Stage Name</label>
      <input
        id="stageName"
        type="text"
        name="stageName"
        class="form-control"
        [(ngModel)]="artist.stagename"
        #stageName="ngModel"
        [required]="!artist.firstname || !artist.lastname"
      />
      <div *ngIf="(!artist.firstname || !artist.lastname) && stageName.invalid && stageName.touched"
           class="text-warning">
        Stage Name is required when First and/ or Last Name is missing.
      </div>
    </div>

    <div class="form-group mt-3">
      <label>Shows</label>
      <div class="d-flex flex-wrap gap-2">
        <button
          type="button"
          *ngFor="let show of shows"
          class="btn"
          [ngClass]="{
          'btn-outline-primary': !isShowSelected(show.id),
          'btn-primary': isShowSelected(show.id)
        }"
          (click)="toggleShowSelection(show.id)">
          {{ show.name || 'Unnamed' }}
        </button>
      </div>
    </div>

    <div class="text-warning text-center mt-2" *ngIf="artistForm.submitted && !isNameValid()">
      Please provide either a Stage Name, or both First and Last Name.
    </div>

    <div class="mt-4 text-center">
      <button
        type="submit"
        class="btn btn-success me-2"
        [disabled]="artistForm.invalid || !isNameValid()">
        Create Artist
      </button>
    </div>
  </form>

  <div *ngIf="showConfirm">
    <div class="modal-backdrop fade show"></div>

    <div class="modal fade show d-block" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header justify-content-center border-0">
            <h5 class="modal-title text-center fw-bold mb-0">
              Confirm Exit
            </h5>
          </div>
          <div class="modal-body text-center py-2">
            <p class="mb-1">
              If you exit this page, your changes will not be saved.
            </p>
          </div>
          <div class="modal-footer justify-content-center pt-1 pb-2 border-0">
            <button type="button" class="btn btn-success me-2" (click)="stay()">Stay on Page</button>
            <button type="button" class="btn btn-danger" (click)="exit()">Exit Page</button>
          </div>

        </div>
      </div>
    </div>
  </div>

</div>
